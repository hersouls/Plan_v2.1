/* Font import is handled centrally in styles/globals.css per design guide */

/* 전역 스타일 import */
@import '../styles/globals.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-pretendard: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI',
    'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',
    'Helvetica Neue', sans-serif;
  /* Header spacing token (matches fixed header height + gap) */
  --app-header-offset: 120px;
}

/* Task Create page input visibility fix - ensure dark text on light inputs */
.page-task-create input[type='text'],
.page-task-create input[type='number'],
.page-task-create input[type='date'],
.page-task-create input[type='time'],
.page-task-create textarea,
.page-task-create select {
  color: #111827; /* gray-900 */
  caret-color: #111827; /* gray-900 */
}

.page-task-create input::placeholder,
.page-task-create textarea::placeholder {
  color: #6b7280; /* gray-500 */
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  font-family: var(--font-pretendard);
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
}

a {
  color: inherit;
  text-decoration: none;
}

@media (prefers-color-scheme: dark) {
  html {
    color-scheme: dark;
  }
}

/* 채팅 관련 스타일 */
.highlight-message {
  animation: highlightPulse 3s ease-in-out;
}

@keyframes highlightPulse {
  0%,
  100% {
    background-color: transparent;
  }
  50% {
    background-color: rgba(59, 130, 246, 0.2);
  }
}

.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

/* 스크롤바 스타일링 */
.overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* 메시지 액션 애니메이션 */
.message-actions-enter {
  opacity: 0;
  transform: scale(0.9);
}

.message-actions-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: opacity 200ms, transform 200ms;
}

.message-actions-exit {
  opacity: 1;
  transform: scale(1);
}

.message-actions-exit-active {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 200ms, transform 200ms;
}

/* 타이핑 인디케이터 애니메이션 */
.typing-dot {
  animation: typingBounce 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typingBounce {
  0%,
  80%,
  100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

/* 검색 결과 하이라이트 */
.search-highlight {
  background-color: rgba(255, 255, 0, 0.3);
  padding: 0 2px;
  border-radius: 2px;
}

/* 고정된 메시지 스타일 */
.pinned-message {
  border-left: 4px solid #fbbf24;
  background: linear-gradient(
    135deg,
    rgba(251, 191, 36, 0.1),
    rgba(251, 191, 36, 0.05)
  );
}

/* 답장 메시지 스타일 */
.reply-message {
  border-left: 4px solid #3b82f6;
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.1),
    rgba(59, 130, 246, 0.05)
  );
}

/* 반응형 채팅 */
@media (max-width: 640px) {
  .chat-message-bubble {
    max-width: calc(100vw - 120px);
  }

  .chat-input-container {
    padding: 0.75rem;
  }

  .chat-emoji-picker {
    grid-template-columns: repeat(8, 1fr);
  }
}

/* 다크 모드 지원 */
@media (prefers-color-scheme: dark) {
  .chat-message-bubble {
    backdrop-filter: blur(10px);
  }

  .chat-input {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
  }
}

/* 접근성 개선 */
@media (prefers-reduced-motion: reduce) {
  .typing-dot,
  .message-actions-enter,
  .message-actions-exit,
  .highlight-message {
    animation: none;
  }
  .page-task-create .animate-wave,
  .page-task-create .animate-float,
  .page-task-create .hover\:-translate-y-1,
  .page-task-create .hover\:scale-105,
  .page-task-create .transition-all,
  .page-task-create .duration-200,
  .page-task-create .duration-300 {
    transition: none !important;
    transform: none !important;
    animation: none !important;
  }
}

/* 포커스 표시 개선 */
.chat-input:focus,
.chat-button:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* 터치 디바이스 최적화 */
@media (hover: none) and (pointer: coarse) {
  .message-actions {
    opacity: 1;
  }

  .chat-button {
    min-height: 44px;
    min-width: 44px;
  }
}

/* 아이콘 색상 복원 - 다크모드 통일 */
svg {
  color: inherit;
}

/* 아이콘 기본 색상 설정 */
.icon-default {
  color: #ffffff;
}

/* 활성 상태 아이콘 색상 */
.icon-active {
  color: #fbbf24; /* yellow-300 */
}

/* 호버 상태 아이콘 색상 */
.icon-hover {
  color: #ffffff;
}

/* 아이콘 그룹 색상 */
.icon-group {
  color: rgba(255, 255, 255, 0.9);
}

.icon-group:hover {
  color: #ffffff;
}
